<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPHONE | Identify Your Connection</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --accent-blue: #0071e3; 
            --accent-yellow: #ffcc00;
            --accent-crimson: #dc143c;
            --bg: #050505; 
            --text: #f5f5f7; 
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --dynamic-accent: var(--accent-blue);
            --dynamic-shadow: rgba(0, 113, 227, 0.4);
        }

        * { cursor: none !important; }

        body { 
            margin: 0; font-family: 'Inter', -apple-system, sans-serif; 
            background: var(--bg); color: var(--text); 
            display: flex; height: 100vh; overflow: hidden; 
        }
        
        #custom-cursor {
            position: fixed; top: 0; left: 0; width: 20px; height: 20px;
            border: 1.5px solid #fff; border-radius: 50%; pointer-events: none;
            z-index: 9999; transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, border-color 0.3s, background 0.3s;
            mix-blend-mode: difference;
        }

        .preview-pane { 
            flex: 1; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; 
            background: radial-gradient(circle at center, #111 0%, #000 100%); 
            position: relative;
        }

        #v-brand-tag { 
            letter-spacing: 0.8em; font-size: 14px; color: #444; 
            text-transform: uppercase; font-weight: 900; margin-bottom: 5px; 
        }

        .identity-display { text-align: center; margin-bottom: 25px; }

        #v-name { 
            font-size: 140px; font-weight: 900; margin: 0; 
            text-transform: uppercase; letter-spacing: -5px;
            transition: all 0.4s ease;
            color: var(--dynamic-accent);
            text-shadow: 0 0 30px var(--dynamic-shadow);
        }

        #v-color-tag {
            font-size: 12px; letter-spacing: 5px; color: #666; 
            text-transform: uppercase; margin-top: -15px; margin-bottom: 10px;
            font-weight: 800;
        }

        #v-umg-display { 
            font-size: 28px; font-weight: 500; color: #fff; 
            margin-top: 5px; opacity: 0.9;
        }

        .specs-list { 
            max-width: 500px; text-align: center; 
            line-height: 1.8; color: #777; font-size: 17px; 
        }
        
        .config-pane { 
            width: 480px; padding: 50px; overflow-y: auto; 
            background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(30px);
            border-left: 1px solid #1a1a1a; 
        }
        
        .section-header { 
            font-size: 10px; font-weight: 800; color: #555; 
            text-transform: uppercase; letter-spacing: 2px; margin: 35px 0 15px; 
        }

        .grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); 
            gap: 12px; 
        }
        
        .btn { 
            background: var(--glass); border: 1px solid var(--glass-border); 
            color: #666; padding: 18px 10px; border-radius: 12px; 
            font-size: 12px; font-weight: 700; transition: 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative; overflow: hidden;
        }

        .btn::before {
            content: ''; position: absolute; inset: 0;
            background: radial-gradient(circle at var(--x) var(--y), var(--spotlight, rgba(255, 255, 255, 0.1)) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s;
        }
        .btn:hover::before { opacity: 1; }
        .btn:hover { border-color: rgba(255, 255, 255, 0.2); color: #fff; transform: translateY(-2px); }

        .btn.active { 
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--dynamic-accent); 
            color: #fff;
            box-shadow: 0 0 20px var(--dynamic-shadow);
        }
        
        .footer { 
            position: absolute; bottom: 40px; left: 60px; right: 40px; 
            display: flex; justify-content: space-between; align-items: center; 
        }

        #v-price { font-size: 42px; font-weight: 800; letter-spacing: -1px; }

        .manifest-btn {
            background: var(--dynamic-accent); 
            color: #000; border: none; padding: 22px 60px;
            border-radius: 100px; font-weight: 900; font-size: 14px;
            text-transform: uppercase; letter-spacing: 2px;
            transition: 0.3s;
        }
        .manifest-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px var(--dynamic-shadow); }

        .swatch { 
            display: flex; align-items: stretch; justify-content: stretch; 
            padding: 0 !important; overflow: hidden; height: 45px;
            border: 1px solid var(--glass-border);
        }
        
        .swatch-color { flex: 1; height: 100%; border-right: 1px solid var(--glass-border); }
        
        .swatch-name { 
            flex: 1.2; display: flex; align-items: center; justify-content: center; 
            font-size: 8px; text-transform: uppercase; letter-spacing: 1px;
            font-weight: 800; color: #888;
        }

        .btn.swatch.active { border-color: var(--dynamic-accent) !important; }
        .btn.swatch.active .swatch-name { color: #fff; }
        .btn.swatch.active .swatch-color { border-right-color: var(--dynamic-accent); }

        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; transform: translateY(-100%); transition: transform 0.6s cubic-bezier(0.85, 0, 0.15, 1); border-bottom: 2px solid var(--dynamic-accent); }
        #loader.active { transform: translateY(0); }

        .back-btn { position: absolute; top: 40px; left: 40px; text-decoration: none; color: #444; font-weight: 800; font-size: 10px; letter-spacing: 2px; z-index: 100; transition: 0.3s; text-transform: uppercase; }
        .back-btn:hover { color: var(--dynamic-accent); transform: translateX(-5px); }

        #toast-container { position: fixed; top: 30px; right: 30px; z-index: 2000; }
        .toast { background: rgba(18, 18, 18, 0.9); backdrop-filter: blur(15px); border: 1px solid #333; padding: 20px 30px; border-radius: 12px; display: flex; flex-direction: column; gap: 8px; min-width: 280px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); transform: translateX(120%); transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1); position: relative; overflow: hidden; }
        .toast.active { transform: translateX(0); }
        .toast-title { font-size: 10px; font-weight: 900; letter-spacing: 2px; color: #666; text-transform: uppercase; }
        .toast-msg { font-size: 14px; font-weight: 600; color: #fff; }
        .toast-progress { position: absolute; bottom: 0; left: 0; height: 3px; width: 100%; background: var(--dynamic-accent); transform: scaleX(0); transform-origin: left; }
        .toast.active .toast-progress { animation: progress 3s linear forwards; }
        @keyframes progress { from { transform: scaleX(1); } to { transform: scaleX(0); } } 
    </style>
</head>
<body>

    <div id="custom-cursor"></div>
    <div id="loader"></div>

<a href="#" class="back-btn" onclick="goBack(event)">← Back to Hub</a>

<div class="preview-pane">
    <div id="v-brand-tag">ALPHONE</div>
    
    <div class="identity-display">
        <h1 id="v-name">25</h1>
        <div id="v-color-tag">---</div>
        <div id="v-umg-display">---</div>
    </div>
    
    <div class="specs-list" id="v-specs"></div>

    <div class="footer">
        <div id="v-price">₹0</div>
        <button class="manifest-btn" id="main-cta" onclick="triggerManifest()">MANIFEST</button>
    </div>
</div>

<div class="config-pane">
    <div class="section-header">Architecture Year</div>
    <div class="grid" id="year-grid">
        <button class="btn active" onclick="updateState('year', '25', this)">2025</button>
        <button class="btn" onclick="updateState('year', '26', this)">2026</button>
    </div>

    <div class="section-header">Model Lineup</div>
    <div class="grid" id="model-grid">
        <button class="btn" onclick="updateState('model', 'L', this)">L Series</button>
        <button class="btn active" onclick="updateState('model', 'Base', this)">Base</button>
        <button class="btn" onclick="updateState('model', 'X', this)">X Series</button>
    </div>

    <div class="section-header">Exterior Finish</div>
    <div id="color-grid" class="grid"></div>

    <div class="section-header">Unified Memory Gigs</div>
    <div id="umg-grid" class="grid"></div>
</div>

<div id="toast-container">
    <div id="toast" class="toast">
        <div class="toast-title">Ecosystem Update</div>
        <div class="toast-msg">Alphone added to Bag</div>
        <div class="toast-progress"></div>
    </div>
</div>

<script src="phone.js"></script>
<script>
    let state = { year: '25', model: 'Base', umg: null, color: null };

    const cursor = document.getElementById('custom-cursor');
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
        const target = e.target.closest('.btn');
        if (target) {
            const rect = target.getBoundingClientRect();
            target.style.setProperty('--x', `${e.clientX - rect.left}px`);
            target.style.setProperty('--y', `${e.clientY - rect.top}px`);
            cursor.style.width = '40px'; cursor.style.height = '40px';
        } else {
            cursor.style.width = '20px'; cursor.style.height = '20px';
        }
    });

    function updateState(key, val, el) {
        state[key] = val;
        if(el) updateActive(el);
        
        if (key === 'model' || key === 'year') {
            state.umg = null;   
            state.color = null; 
            renderColors();
            renderUMG();
        }
        updateUI();
    }

    function renderColors() {
        const grid = document.getElementById('color-grid');
        grid.innerHTML = '';
        const options = ALPHONE_DATA.colorOptions[state.year];
        
        options.forEach(opt => {
            const b = document.createElement('button');
            b.className = `btn swatch ${state.color === opt.name ? 'active' : ''}`;
            b.innerHTML = `<div class="swatch-color" style="background:${opt.hex}"></div><div class="swatch-name">${opt.name}</div>`;
            b.onclick = () => { state.color = opt.name; updateActive(b); updateUI(); };
            grid.appendChild(b);
        });
        
        if (!state.color || !options.find(o => o.name === state.color)) {
            if (grid.firstChild) grid.firstChild.click();
        }
    }

    function renderUMG() {
        const grid = document.getElementById('umg-grid');
        grid.innerHTML = '';
        const options = ALPHONE_DATA.umgOptions[state.year][state.model];
        
        options.forEach(opt => {
            const b = document.createElement('button');
            b.className = `btn ${state.umg === opt ? 'active' : ''}`;
            b.innerText = opt;
            b.onclick = () => { state.umg = opt; updateActive(b); updateUI(); };
            grid.appendChild(b);
        });

        if (!state.umg || !options.includes(state.umg)) {
            if (grid.firstChild) grid.firstChild.click();
        }
    }

    function updateActive(el) {
        Array.from(el.parentNode.children).forEach(b => b.classList.remove('active'));
        el.classList.add('active');
    }

    function updateUI() {
        const spec = ALPHONE_DATA.specs[state.model];
        const engine = `${spec.chipPrefix}${state.year}${spec.chipSuffix || ''}`;
        const modelSuffix = state.model === 'Base' ? '' : state.model;
        
        document.getElementById('v-name').innerText = `${state.year}${modelSuffix}`;
        document.getElementById('v-color-tag').innerText = state.color || '--';
        document.getElementById('v-umg-display').innerText = state.umg ? `${state.umg} Unified Memory Gigs` : '--';

        let accent, shadow, spotlight;
        if (state.model === 'X') {
            accent = 'var(--accent-crimson)'; shadow = 'rgba(220, 20, 60, 0.4)'; spotlight = 'rgba(220, 20, 60, 0.15)';
        } else if (state.model === 'L') {
            accent = 'var(--accent-yellow)'; shadow = 'rgba(255, 204, 0, 0.3)'; spotlight = 'rgba(255, 204, 0, 0.15)';
        } else {
            accent = 'var(--accent-blue)'; shadow = 'rgba(0, 113, 227, 0.4)'; spotlight = 'rgba(0, 113, 227, 0.15)';
        }

        document.documentElement.style.setProperty('--dynamic-accent', accent);
        document.documentElement.style.setProperty('--dynamic-shadow', shadow);
        document.querySelectorAll('.btn').forEach(btn => btn.style.setProperty('--spotlight', spotlight));

        document.getElementById('v-specs').innerHTML = `
            <span style="color:#eee; font-weight:600; letter-spacing:1px;">${engine} Engine</span><br>
            ${spec.display}<br>${spec.frontCam}<br>${spec.rearCam}<br>
            ${spec.extraCam ? spec.extraCam + '<br>' : ''}${spec.teleCam ? spec.teleCam + '<br>' : ''}
            <span style="color:white; font-weight:bold; margin-top:12px; display:block; letter-spacing:1px;">${spec.battery}</span>
        `;

        const pData = ALPHONE_DATA.pricing[state.year];
        const total = pData.baseChassis[state.model] + (pData.umgPrices[state.umg] || 0);
        document.getElementById('v-price').innerText = `₹${total.toLocaleString()}`;
    }

    function triggerManifest() {
        const spec = ALPHONE_DATA.specs[state.model];
        const currentConfig = { 
            id: Date.now(), type: 'alphone', model: state.model, year: state.year,
            color: state.color, umg: state.umg, engine: `${spec.chipPrefix}${state.year}${spec.chipSuffix || ''}`,
            price: document.getElementById('v-price').innerText, quantity: 1
        };
        let bag = JSON.parse(localStorage.getItem('iRhZi_bag')) || [];
        const existingIndex = bag.findIndex(item => item.type === currentConfig.type && item.model === currentConfig.model && item.year === currentConfig.year && item.umg === currentConfig.umg && item.color === currentConfig.color);
        if (existingIndex > -1) { bag[existingIndex].quantity += 1; } else { bag.push(currentConfig); }
        localStorage.setItem('iRhZi_bag', JSON.stringify(bag)); 
        const accent = getComputedStyle(document.documentElement).getPropertyValue('--dynamic-accent');
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.9 }, colors: [accent, '#ffffff'] });
        const toast = document.getElementById('toast');
        toast.classList.add('active');
        setTimeout(() => { toast.classList.remove('active'); }, 3000);
    }

    function goBack(e) { e.preventDefault(); document.getElementById('loader').classList.add('active'); setTimeout(() => { window.location.href = 'index.html'; }, 600); }
    window.addEventListener('pageshow', () => { document.getElementById('loader').classList.remove('active'); });
    
    // STARTUP
    updateState('model', 'Base', document.querySelector('#model-grid .active'));
</script>
</body>
</html>